{% extends "base.html" %}
{% load static %}
{% block content %}

<body style="background-color: #f9fafb;">

    <div>
        <div style="margin: 0px 10px;">
            <div class="container" style="padding: 0px; margin-top: 30px;">
                <div class="d-flex align-items-center justify-content-center">
                    <form method="POST" style="width: 100%;">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-2 mb-3">
                                <label for="selected_date">يوم:</label>
                                <input required type="date" name="selected_date" id="selected_date" class="form-control">
                            </div>
                            <div class="col-md-1 mb-3 mt-3">
                                <button type="submit" class="btn save-btn mt-2" id="submitButton" style="margin:auto; width: 100%;">بحث</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <section class="profile container p-3 pt-4">
                <div class="row justify-content-start">
                    <div class="col-md-1 mb-3">
                        <!-- <button type="submit" class="btn save-btn mt-2" style="margin:auto; width: 100%;"><i class="fa-solid fa-print" style="width: 20px; height: 20px;"></i></button> -->
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-striped" align="center">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">الاسم</th>
                                <th scope="col">القسم / الاداره</th>
                                <th scope="col">نوع الاجازه</th>
                                <th scope="col">تاريخ الطلب</th>
                                <th scope="col">من تاريخ</th>
                                <th scope="col">الي تاريخ</th>
                                <th scope="col">المدة</th>
                                <th scope="col">الحالة</th>
                            </tr>
                        </thead>
                        <br>
                        <h3>الموظفين:</h3>
                        <br>
                        <tbody >
                            {% for vacation in users_vacations %}
                            <tr>
                                <th scope="row">{{ forloop.counter }}</th>
                                <td><a href="#" style=" text-decoration: none; color: #2e2e2e;">{{ vacation.employee }}</a></td>
                                <td>{{ vacation.employee }}</td>
                                <td>{{vacation.get_vacation_type_display}}</td>
                                {% if department.department_id == 1 %}
                                <td>{{vacation.employee.department}}</td>
                                {% endif %}
                                <td>{{vacation.request_date|date:'d/m/Y'}}</td>
                                <td>{{vacation.start_date|date:'d/m/Y'}}</td>
                                <td>{{vacation.end_date|date:'d/m/Y'}}</td>
                                <td>{{vacation.duration}} ايام</td>
                                {% if vacation.status == '0' %}
                                <td><div class="alert alert-warning" role="alert" style="padding: 6px 1rem; text-align: center; margin-bottom: 0px; min-width: 132px;">{{ vacation.get_status_display }}</div></td>
                                {% elif vacation.status == '1' %}
                                <td><div class="alert alert-danger" role="alert" style="padding: 6px 1rem; text-align: center; margin-bottom: 0px; min-width: 132px;">{{ vacation.get_status_display }}</div></td>
                                {% else %}
                                <td><div class="alert alert-success" role="alert" style="padding: 6px 1rem; text-align: center; margin-bottom: 0px; min-width: 132px;">{{ vacation.get_status_display }}</div></td>
                                {% endif %}
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <hr>
                <div class="table-responsive">
                    <table class="table table-striped" align="center">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">الاسم</th>
                                <th scope="col">القسم / الاداره</th>
                                <th scope="col">نوع الاجازه</th>
                                <th scope="col">تاريخ الطلب</th>
                                <th scope="col">من تاريخ</th>
                                <th scope="col">الي تاريخ</th>
                                <th scope="col">المدة</th>
                                <th scope="col">الحالة</th>
                            </tr>
                        </thead>
                        <br>
                        <h3>المديرين:</h3>
                        <br>
                        <tbody >
                            {% for vacation in manager_vacations %}
                            <tr>
                                <th scope="row">{{ forloop.counter }}</th>
                                <td><a href="#" style=" text-decoration: none; color: #2e2e2e;">{{ vacation.employee }}</a></td>
                                <td>{{ vacation.employee }}</td>
                                <td>{{vacation.get_vacation_type_display}}</td>
                                {% if department.department_id == 1 %}
                                <td>{{vacation.employee.department}}</td>
                                {% endif %}
                                <td>{{vacation.request_date|date:'d/m/Y'}}</td>
                                <td>{{vacation.start_date|date:'d/m/Y'}}</td>
                                <td>{{vacation.end_date|date:'d/m/Y'}}</td>
                                <td>{{vacation.duration}} ايام</td>
                                {% if vacation.status == '0' %}
                                <td><div class="alert alert-warning" role="alert" style="padding: 6px 1rem; text-align: center; margin-bottom: 0px; min-width: 132px;">{{ vacation.get_status_display }}</div></td>
                                {% elif vacation.status == '1' %}
                                <td><div class="alert alert-danger" role="alert" style="padding: 6px 1rem; text-align: center; margin-bottom: 0px; min-width: 132px;">{{ vacation.get_status_display }}</div></td>
                                {% else %}
                                <td><div class="alert alert-success" role="alert" style="padding: 6px 1rem; text-align: center; margin-bottom: 0px; min-width: 132px;">{{ vacation.get_status_display }}</div></td>
                                {% endif %}
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

            </section>
        </div>
    </div>
    <br>
</body>

{% endblock content %}
